<link rel="import" href="./../../bower_components/polymer/polymer.html">

<polymer-element name="drawer-boxes" attributes="items">
  <template>
    <link rel="stylesheet" href="drawer-boxes.css">

    <core-animated-pages selected="{{ page }}" transitions="hero-transition cross-fade">
      <section class="drawer-box__container">

        <template repeat="{{ item in items }}">

          <div class="drawer-box__item" draggable="true" on-tap="{{ filter_transition }}" hero-id="{{ item.id }}" hero>
            <paper-ripple fit></paper-ripple>
            <div class="drawer-box__color bg--{{ item.color.main }}" hero-id="{{ item.id }}-color"></div>
            <h1 class="drawer-box_title" cross-fade>{{ item.name }}</h1>
          </div>

        </template>

      </section>

      <section class="filter-details__container">
        <div class="filter-details__item" draggable="true" hero-id="{{ selected_filter.id }}" hero>
          <paper-icon-button class="filter-details__back" icon="arrow-back" on-tap="{{ filter_transition }}"></paper-icon-button>
          <div class="filter-details__color bg--{{ selected_filter.color.main }}" hero-id="{{ selected_filter.id }}-color">
            <h1 class="filter-details_title" cross-fade>{{ selected_filter.name }}</h1>
          </div>
          <paper-fab class="filter-details__button bg--{{ selected_filter.color.accent }}" icon="add"></paper-fab>
        </div>
      </section>

    </core-animated-pages>
  </template>
  <script>
    (function () {
      Polymer({
        page: 0,
        selected_filter: null,

        filter_transition: function( e ) {
          if (this.page === 0 && e.target.templateInstance.model.item) {
            this.selected_filter = e.target.templateInstance.model.item;
            this.page = 1;
          } else {
            this.page = 0;
          }
        }
      });
    })();
  </script>
</polymer-element>
